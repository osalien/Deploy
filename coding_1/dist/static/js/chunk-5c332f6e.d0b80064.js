(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c332f6e"],{1200:function(e,t,n){},7514:function(e,t,n){"use strict";var s=n("5ca1"),r=n("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),s(s.P+s.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"7f66":function(e,t,n){"use strict";var s=n("b775"),r={getList:function(e){return Object(s["a"])({url:"/sysRole/getList",method:"post",data:e})},getPageList:function(e){return Object(s["a"])({url:"/sysRole/getPageList",method:"post",data:e})},detail:function(e){return Object(s["a"])({url:"/sysRole/info/"+e,method:"get"})},add:function(e){return Object(s["a"])({url:"/sysRole/add",method:"post",data:e})},update:function(e){return Object(s["a"])({url:"/sysRole/update",method:"post",data:e})},delete:function(e){return Object(s["a"])({url:"/sysRole/delete/"+e,method:"post"})},updateSysRolePermission:function(e){return Object(s["a"])({url:"/sysRole/updateSysRolePermission",method:"post",data:e})}};t["a"]=r},b4c7:function(e,t,n){"use strict";var s=n("b775"),r={getAllMenuTree:function(){return Object(s["a"])({url:"/sysPermission/getAllMenuTree",method:"post"})},detail:function(e){return Object(s["a"])({url:"/sysPermission/info/"+e,method:"get"})},getMenuIdsByRoleId:function(e){return Object(s["a"])({url:"/sysPermission/getThreeLevelPermissionIdsByRoleId/"+e,method:"get"})},getNavMenuTree:function(){return Object(s["a"])({url:"/sysPermission/getNavMenuTree",method:"post"})},add:function(e){return Object(s["a"])({url:"/sysPermission/add",method:"post",data:e})},update:function(e){return Object(s["a"])({url:"/sysPermission/update",method:"post",data:e})},delete:function(e){return Object(s["a"])({url:"/sysPermission/delete/"+e,method:"post"})}};t["a"]=r},bbbc:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-tree-container"},[e.roleName?n("div",{staticClass:"block"},[n("p",[e._v(e._s(e.roleName)+"角色权限设置")]),e._v(" "),n("el-input",{staticClass:"filter-input",attrs:{placeholder:"输入关键字进行过滤",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","node-key":"id","filter-node-method":e.filterNode,"highlight-current":"","default-checked-keys":e.checkedKeys,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var s=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticStyle:{border:"0px solid red",width:"200px"}},[n("i",{class:s.icon}),e._v("\n        "+e._s(s.name)+"\n      ")]),e._v(" "),n("span",{staticStyle:{border:"0px solid blue",width:"700px"}},[e._v(e._s(s.remark))])])}}],null,!1,371322576)}),e._v(" "),n("div",{staticClass:"btn-container"},[n("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("关闭")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("保存")])],1)],1):e._e(),e._v(" "),e.errorMessage?n("div",{staticClass:"error-container"},[n("el-alert",{attrs:{title:e.errorMessage,type:"error",effect:"dark",center:"",closable:!1}})],1):e._e()])},r=[],a=(n("7514"),n("7f7f"),n("b4c7")),o=n("7f66"),i={name:"SysRoleMenu",data:function(){return{filterText:"",data:null,checkedKeys:null,roleId:null,roleName:null,errorMessage:null}},created:function(){var e=this.$route.params&&this.$route.params.id;console.log(e),this.roleId=e,this.getRole(e)},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{getMenus:function(){var e=this;a["a"].getAllMenuTree().then((function(t){e.data=t.data}))},filterNode:function(e,t){return!e||(-1!==t.name.indexOf(e)||-1!==t.remark.indexOf(e))},getRole:function(e){var t=this;o["a"].detail(e).then((function(e){200===e.code?(t.roleName=e.data.name,t.loadData()):t.errorMessage=e.message}))},loadData:function(){this.getMenus(),this.getMenuIdsByRoleId(this.roleId)},getMenuIdsByRoleId:function(e){var t=this;a["a"].getMenuIdsByRoleId(e).then((function(e){t.checkedKeys=e.data}))},handleClose:function(){var e=this,t=this.$store.state.tagsView.visitedViews.find((function(e){return"sysRoleMenu"===e.name}));this.$store.dispatch("tagsView/delView",t).then((function(t){var n=t.visitedViews;if(n){var s=n.slice(-1)[0];e.$router.push(s.fullPath)}}))},handleSave:function(){var e=this,t=this.$refs.tree.getCheckedKeys();console.log(t);var n={roleId:this.roleId,permissionIds:t};o["a"].updateSysRolePermission(n).then((function(t){console.log(t.data),200===t.code&&(e.$message({message:"保存成功",type:"success"}),e.loadData())}))}}},l=i,u=(n("c9e1"),n("2877")),c=Object(u["a"])(l,s,r,!1,null,null,null);t["default"]=c.exports},c9e1:function(e,t,n){"use strict";var s=n("1200"),r=n.n(s);r.a}}]);