(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ced6afa"],{"097b":function(e,t,a){"use strict";var n=a("0f18"),l=a.n(n);l.a},"0f18":function(e,t,a){},"2b90":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"sys-role-list"}},[a("div",{staticClass:"filter-container"},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"状态",clearable:""},on:{change:e.handleFilter},model:{value:e.listQuery.state,callback:function(t){e.$set(e.listQuery,"state",t)},expression:"listQuery.state"}},e._l(e.stateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入关键字进行查询",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList()}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchColumn,callback:function(t){e.searchColumn=t},expression:"searchColumn"}},e._l(e.searchOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticStyle:{width:"115px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px",width:"92px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleAdd}},[e._v("添加\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{label:"编号",prop:"id",sortable:"custom",align:"center",width:"80px","class-name":e.getSortClass("id")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称","min-width":"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色编码","min-width":"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色备注","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.remark))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",sortable:"custom","min-width":"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","class-name":"status-col",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tag",{attrs:{type:e._f("statusFilter")(n.state)}},[0===n.state?a("span",[e._v("禁用")]):1===n.state?a("span",[e._v("启用")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"240","class-name":"operation"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v("\n        操作\n        "),a("el-dropdown",{attrs:{trigger:"click"}},[a("el-link",{staticStyle:{"vertical-align":"baseline"},attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-s-operation"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-checkbox",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:"tableColumnChecked"}},[e._v("角色名称")])],1),e._v(" "),a("el-dropdown-item",[a("el-checkbox",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:"tableColumnChecked"}},[e._v("角色编码")])],1),e._v(" "),a("el-dropdown-item",[a("el-checkbox",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:"tableColumnChecked"}},[e._v("角色备注")])],1),e._v(" "),a("el-dropdown-item",[a("el-checkbox",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:"tableColumnChecked"}},[e._v("状态")])],1)],1)],1),e._v(" "),a("el-link",{staticStyle:{"vertical-align":"baseline",margin:"0px 3px"},attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-document"})]),e._v(" "),a("el-link",{staticStyle:{"vertical-align":"baseline"},attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-printer"})])]}},{key:"default",fn:function(t){var n=t.row;return[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handDetail(n.id)}}},[e._v("详情")]),e._v(" "),a("router-link",{attrs:{to:"/system/sys-role-menu/"+n.id}},[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handUpdate(n.id)}}},[e._v("权限设置")])],1),e._v(" "),a("el-link",{attrs:{type:"warning"},on:{click:function(t){return e.handUpdate(n.id)}}},[e._v("修改")]),e._v(" "),a("el-link",{attrs:{type:"danger"},on:{click:function(t){return e.handleDelete(n.id,n.name)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageIndex,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageIndex",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),e._v(" "),a("sys-role",{ref:"detailPage",attrs:{"is-detail":""}}),e._v(" "),a("sys-role",{ref:"addPage",attrs:{"is-add":""},on:{change:e.getList}}),e._v(" "),a("sys-role",{ref:"updatePage",attrs:{"is-update":""},on:{change:e.getList}})],1)},l=[],i=a("6724"),o=a("333d"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,"custom-class":"page-dialog sys-role-dialog"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"sysRoleForm",staticClass:"page-form",staticStyle:{width:"100%"},attrs:{rules:e.rules,model:e.form,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{attrs:{readonly:e.isDetail},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[a("el-input",{attrs:{readonly:e.isDetail},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"state"}},[a("el-radio-group",{attrs:{disabled:e.isDetail},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入备注",readonly:e.isDetail},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isDetail?[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])]:e.isAdd?[a("el-button",{on:{click:function(t){return e.restForm()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitAddForm()}}},[e._v("保存")])]:e.isUpdate?[a("el-button",{on:{click:function(t){return e.restForm()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitUpdateForm()}}},[e._v("修改")])]:e._e()],2)],1)},r=[],u=(a("7f7f"),a("7f66")),c={name:"SysRole",props:{isDetail:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1},isUpdate:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,dialogTitle:null,form:{id:null,name:null,code:null,remark:null,state:1},updateId:null,rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:4,max:16,message:"长度在 2 到 10 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:4,max:10,message:"长度在 4 到 20 个字符",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}]}}},computed:{},created:function(){},methods:{handle:function(e){this.isDetail?(console.log("detail..."+e),this.rules=null,this.dialogTitle="系统角色详情",this.getRoleDetail(e)):this.isAdd?(console.log("add..."),this.dialogTitle="新增系统角色"):this.isUpdate&&(console.log("update..."),this.dialogTitle="修改系统角色",this.updateId=e,this.getRoleDetail(e)),this.dialogVisible=!0},submitAddForm:function(){var e=this;this.$refs.sysRoleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("submit!"),e.addRole()}))},submitUpdateForm:function(){var e=this;this.$refs.sysRoleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log("submit!"),e.updateRole()}))},getRoleDetail:function(e){var t=this;u["a"].detail(e).then((function(e){200===e.code&&(t.form=e.data)}))},addRole:function(){var e=this,t={name:this.form.name,code:this.form.code,remark:this.form.remark,state:this.form.state};console.log(t),u["a"].add(t).then((function(t){200===t.code&&(e.restForm(),e.$message({message:"保存系统角色成功",type:"success"}),e.$emit("change"))}))},updateRole:function(){var e=this,t={id:this.updateId,name:this.form.name,code:this.form.code,remark:this.form.remark,state:this.form.state};u["a"].update(t).then((function(t){200===t.code&&(e.restForm(),e.$message({message:"修改系统角色成功",type:"success"}),e.$emit("change"))}))},restForm:function(){this.$refs.sysRoleForm.resetFields(),this.dialogVisible=!1}}},d=c,p=(a("673f"),a("2877")),m=Object(p["a"])(d,s,r,!1,null,"0038944d",null),f=m.exports,h={name:"SysRoleList",components:{SysRole:f,Pagination:o["a"]},directives:{waves:i["a"]},filters:{statusFilter:function(e){return 0===e?"info":1===e?"success":2===e?"warning":void 0}},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,sortColumn:"id",sortAsc:!1,listQuery:{pageIndex:1,pageSize:10,keyword:null,name:null,code:null,state:null,pageSorts:[]},stateOptions:[{label:"启用",value:1},{label:"禁用",value:0}],tableColumnChecked:null,searchColumn:"keyword",searchValue:null,searchOptions:[{label:"全部",value:"keyword"},{label:"角色名称",value:"name"},{label:"角色编码",value:"code"}],createTimeRange:null,showReviewer:!0,dialogStatus:"",textMap:{update:"Edit",create:"Create"},dialogPvVisible:!1,pvData:[],downloadLoading:!1}},created:function(){this.setDefaultSort(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,u["a"].getPageList(this.listQuery).then((function(t){e.list=t.data.records,e.total=t.data.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.pageIndex=1,this.listQuery.keyword=null,this.listQuery.name=null,this.listQuery.code=null,this.listQuery[this.searchColumn]=this.searchValue,this.getList()},setDefaultSort:function(){this.listQuery.pageSorts=[{column:this.sortColumn,asc:this.sortAsc}]},sortChange:function(e){var t=e.prop,a=e.order;this.sortColumn="createTime"===t?"create_time":t,this.sortAsc="ascending"===a,this.listQuery.pageSorts=[{column:this.sortColumn,asc:this.sortAsc}],this.handleFilter()},getSortClass:function(e){return this.sortColumn===e?this.sortAsc?"ascending":"descending":""},handleAdd:function(){var e=this;this.dialogStatus="create",this.$nextTick((function(){e.$refs.addPage.handle()}))},handDetail:function(e){var t=this;this.$nextTick((function(){t.$refs.detailPage.handle(e)}))},handUpdate:function(e){var t=this;this.$nextTick((function(){t.$refs.updatePage.handle(e)}))},handleDelete:function(e,t){var a=this;this.$confirm("您确定要删除 "+t+" ?","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u["a"].delete(e).then((function(e){200===e.code&&(a.$message({type:"success",message:"删除成功!"}),a.handleFilter())}))}))}}},g=h,v=(a("a092"),Object(p["a"])(g,n,l,!1,null,null,null));t["default"]=v.exports},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},l=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var n=s(),l=e-n,r=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=r;var s=Math.easeInOutQuad(u,n,l,t);o(s),u<t?i(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},c=u,d=(a("097b"),a("2877")),p=Object(d["a"])(c,n,l,!1,null,"8b5f5010",null);t["a"]=p.exports},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function l(e,t){function a(a){var n=Object.assign({},t.value),l=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),i=l.ele;if(i){i.style.position="relative",i.style.overflow="hidden";var o=i.getBoundingClientRect(),s=i.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",i.appendChild(s)),l.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=l.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var i={bind:function(e,t){e.addEventListener("click",l(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},o=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;t["a"]=i},"673f":function(e,t,a){"use strict";var n=a("fa64"),l=a.n(n);l.a},"7f66":function(e,t,a){"use strict";var n=a("b775"),l={getList:function(e){return Object(n["a"])({url:"/sysRole/getList",method:"post",data:e})},getPageList:function(e){return Object(n["a"])({url:"/sysRole/getPageList",method:"post",data:e})},detail:function(e){return Object(n["a"])({url:"/sysRole/info/"+e,method:"get"})},add:function(e){return Object(n["a"])({url:"/sysRole/add",method:"post",data:e})},update:function(e){return Object(n["a"])({url:"/sysRole/update",method:"post",data:e})},delete:function(e){return Object(n["a"])({url:"/sysRole/delete/"+e,method:"post"})},updateSysRolePermission:function(e){return Object(n["a"])({url:"/sysRole/updateSysRolePermission",method:"post",data:e})}};t["a"]=l},"8d41":function(e,t,a){},a092:function(e,t,a){"use strict";var n=a("ee54"),l=a.n(n);l.a},ee54:function(e,t,a){},fa64:function(e,t,a){}}]);